# DAM
Trabajo final de la materia "Desarrollo de aplicaciones multiplataforma" de la CEIoT de la UBA.

Para correrlo es necesario tener instalado Docker ya que el proyecto corre sobre  luego de ejecutar "docker compose up" en la carpeta raíz del proyecto, es necesario correr en la terminal el comando "docker exec -it node-backend bash" y a continuación ejecutar "npm install jsonwebtoken@8.5.1".
También hay que correr "docker exec -it ionic-ui bash" con docker levantado en esa misma carpeta raíz y luego ejecutar "npm install --save higcharts", ya que es necesario para generar la imagen gauge.

El proyecta con una página de inicio (http://localhost:8100/home), la cual cuenta con un botón que redirige a la página http://localhost:8100/dispositivos. En la esquina superior izquierda podrá observar un botón con el cual desplegar la lista de dispositivo. Al hacer click, aparece la lista y el botón cambia por otro que permite ocultarla. Esto se hace con la directiva ngIf. En la lista se despliegan los 6 botones, donde cada uno coresponde a un dispositivos de la base de dato. Al pasar por encima de estos botones con el mouse, estos toman color debido a una directia custom. Al hacer click sobre un botón, nos dirigimos a la página http://localhost:8100/dispositivos/id, que nos muestra la última medición de dicho dispositivo. Dicha medición no corresponde a la última de la base de datos, si no que el valor se genera al azar para simular una nueva medición. Acá aprovecho a comentar que http://localhost:8100/dispositivos/id es el endpoint donde se consulta la historia de todas las mediciones del dispositivo "id". Si quisiera ver la úlltima medición almaenada, existe el endpoint http://localhost:8100/dispositivos/ultimaMedicion/:id, que tiene como filtro fecha más cercana y número de medición más alto (este último para desempartar en caso de que haya más de una edición con la misma fecha y hora). Volviendo a la vista de la última medición, se agregó un Pipe custom, con el que se informa el estado del suelo en base al valor de la medición. En esta vista se encuentran 3 botones. El que lleva al historial de mediciones del sensor, el que lleva al historial del log de riegos y el que acciona la electroválvula. Acá debo aclarar que el comportamiento de dicho botón no es exactamente como se solicitaba ya que almacena en la base de datos todos los eventos de mediciones y no solamente a aquellos que ocurrieran al cerrar la válvula. Por último,si se quiere ver el gráfico tipo gauge que debería estar en la página de última medición, se debe acceder a http://localhost:8100/imagen-medidor. Este elemento presentaba diferentes problemas, por lo que opté por no mostrarlo en la vista correspondiente más no eliminarlo.
